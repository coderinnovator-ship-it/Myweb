<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>WebForge — Logo, Card, Bio & Website Generator</title>
<style>
  :root{
    --accent:#0f62fe; --muted:#6b7280; --panel:#fff; --bg:#f6f7fb; --text:#0f1724;
  }
  *{box-sizing:border-box}
  body{font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial;margin:0;background:var(--bg);color:var(--text);padding:20px}
  .wrap{max-width:1100px;margin:0 auto}
  header{display:flex;gap:14px;align-items:center;margin-bottom:18px}
  .logoBrand{background:linear-gradient(135deg,var(--accent),#6f44ff);color:white;padding:10px 14px;border-radius:10px;font-weight:700}
  h1{margin:0;font-size:20px}
  p.lead{margin:6px 0 0;color:var(--muted)}
  .grid{display:grid;grid-template-columns:1fr 420px;gap:18px}
  .card{background:var(--panel);border-radius:12px;padding:16px;box-shadow:0 6px 20px rgba(15,23,36,0.06)}
  label{display:block;font-size:13px;color:var(--muted);margin-bottom:6px}
  input[type="text"], input[type="email"], input[type="tel"], textarea, select{
    width:100%;padding:10px;border:1px solid #e6e9ef;border-radius:10px;font-size:15px;
  }
  textarea{min-height:72px;resize:vertical}
  .row{display:flex;gap:10px}
  .col{flex:1}
  .actions{display:flex;gap:8px;align-items:center;margin-top:12px}
  .btn{background:var(--accent);color:white;padding:10px 14px;border-radius:10px;border:0;cursor:pointer;font-weight:600}
  .btn.ghost{background:#fff;color:var(--text);border:1px solid #ddd}
  .muted{color:var(--muted);font-size:13px}
  .previewBox{display:flex;flex-direction:column;gap:12px}
  .previewArea{background:#fff;border-radius:10px;padding:12px;border:1px solid #eee;min-height:120px;display:flex;align-items:center;justify-content:center}
  .controlsSmall{display:flex;gap:8px;align-items:center}
  .chip{display:inline-flex;gap:8px;align-items:center;padding:6px 8px;border-radius:8px;background:#f2f4f8;border:1px solid #eceff6;font-size:13px;color:var(--muted)}
  footer{margin-top:18px;color:var(--muted);font-size:13px;text-align:center}
  .logoPreview svg{width:160px;height:160px;border-radius:14px;background:transparent}
  .cardPreview{width:320px;height:180px;border-radius:10px;padding:16px;box-shadow:0 8px 30px rgba(15,23,36,0.06);background:linear-gradient(180deg,#fff,#fbfdff);display:flex;flex-direction:column;justify-content:space-between}
  .cardTop{display:flex;gap:12px;align-items:center}
  .cardLogo{width:64px;height:64px;border-radius:8px;overflow:hidden;display:flex;align-items:center;justify-content:center;background:#f3f6fb}
  .cardName{font-weight:700}
  .cardSmall{font-size:13px;color:var(--muted)}
  .bioList{display:flex;flex-direction:column;gap:8px}
  .bioItem{background:#fff;border-radius:8px;padding:10px;border:1px solid #f0f3f7}
  @media(max-width:980px){ .grid{grid-template-columns:1fr} .cardPreview{width:100%;max-width:420px} }

  /* New website panel */
  .sitePreviewWrap{display:flex;flex-direction:column;gap:8px}
  .sitePreviewFrame{width:100%;height:400px;border-radius:10px;border:1px solid #e6e9ef;overflow:hidden}
  .siteControls{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
  .small{padding:8px 10px;font-size:14px}
  .danger{background:#ff4d4f}
</style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="logoBrand">WebForge</div>
      <div>
        <h1>WebForge — Logo, Card, Bio & Website</h1>
        <p class="lead">Generate a logo, business card, social bios and a full website you can download instantly.</p>
      </div>
    </header>

    <div class="grid">
      <!-- LEFT: Inputs -->
      <div class="card">
        <label>Business / Personal Name</label>
        <input id="businessName" placeholder="Example: Connect Studio">

        <div style="height:10px"></div>
        <label>Email (visible on card & site)</label>
        <input id="email" type="email" placeholder="name@example.com">

        <div style="height:10px"></div>
        <label>Phone (visible on card & site)</label>
        <input id="phone" type="tel" placeholder="+1 555 555 5555">

        <div style="height:10px"></div>
        <label>One-line description (used in hero / bios / site)</label>
        <input id="desc" placeholder="Example: Fast, affordable website generator">

        <div style="height:10px"></div>
        <label>Address (optional)</label>
        <input id="address" placeholder="City, State, Country">

        <div style="height:10px"></div>
        <label>Highlight services / tagline (comma separated)</label>
        <input id="highlights" placeholder="Websites, Logo, Business card">

        <div style="height:10px"></div>
        <label>Logo icon category</label>
        <select id="iconCategory">
          <option value="general">General</option>
          <option value="tech">Tech</option>
          <option value="food">Food</option>
          <option value="fashion">Fashion</option>
          <option value="health">Health</option>
        </select>

        <div style="height:10px"></div>
        <label>Preferred accent color (hex)</label>
        <input id="accent" placeholder="#0f62fe" value="#0f62fe">

        <div style="height:12px"></div>
        <div class="actions">
          <button id="generateBtn" class="btn">Generate</button>
          <button id="resetBtn" class="btn ghost">Reset</button>
          <div class="muted" style="margin-left:auto">Mei — everything runs locally</div>
        </div>
        <div style="height:10px"></div>
        <div class="muted">Tip: fill name + icon category + accent then press Generate.</div>
      </div>

      <!-- RIGHT: Previews including Website -->
      <div style="display:flex;flex-direction:column;gap:12px">
        <!-- Logo Card Bios (same as before) -->
        <div class="card">
          <div style="display:flex;justify-content:space-between;align-items:center">
            <strong>Logo</strong>
            <div class="controlsSmall">
              <button id="downloadLogoPng" class="btn ghost small">Download PNG</button>
              <button id="downloadLogoSvg" class="btn ghost small">Download SVG</button>
            </div>
          </div>
          <div style="height:10px"></div>
          <div class="previewArea logoPreview" id="logoPreview">
            <div class="muted">No logo yet — click Generate.</div>
          </div>
        </div>

        <div class="card">
          <div style="display:flex;justify-content:space-between;align-items:center">
            <strong>Business Card</strong>
            <div class="controlsSmall">
              <button id="downloadCardPng" class="btn ghost small">Download PNG</button>
            </div>
          </div>
          <div style="height:10px"></div>
          <div class="previewArea" id="cardPreviewArea">
            <div class="muted">No card yet — click Generate.</div>
          </div>
        </div>

        <div class="card">
          <div style="display:flex;justify-content:space-between;align-items:center">
            <strong>Social Media Bios</strong>
            <div class="controlsSmall">
              <button id="copyAllBios" class="btn ghost small">Copy All</button>
            </div>
          </div>
          <div style="height:10px"></div>
          <div class="previewArea" style="flex-direction:column;align-items:stretch" id="biosArea">
            <div class="muted">No bios yet — click Generate.</div>
          </div>
        </div>

        <!-- NEW: Website generator -->
        <div class="card">
          <div style="display:flex;justify-content:space-between;align-items:center">
            <strong>Website (single-file)</strong>
            <div class="siteControls">
              <button id="downloadSiteBtn" class="btn small">Download site (single HTML)</button>
              <button id="openInNew" class="btn ghost small">Open in new tab</button>
            </div>
          </div>

          <div style="height:10px"></div>
          <div class="previewArea sitePreviewWrap" style="flex-direction:column;align-items:stretch">
            <div style="font-size:13px;color:var(--muted)">Preview — the website is generated from your inputs. Click the download button to get a single usable <code>index.html</code>.</div>
            <iframe id="siteFrame" class="sitePreviewFrame" sandbox="allow-scripts allow-same-origin"></iframe>
          </div>
        </div>

      </div>
    </div>

    <footer>&copy; <span id="year"></span> WebForge — Mei</footer>
  </div>

<script>
  // helper $
  const $ = id => document.getElementById(id);
  $('year').textContent = new Date().getFullYear();

  // inputs
  const nameEl = $('businessName');
  const emailEl = $('email');
  const phoneEl = $('phone');
  const descEl = $('desc');
  const addressEl = $('address');
  const highlightsEl = $('highlights');
  const categoryEl = $('iconCategory');
  const accentEl = $('accent');

  // previews and buttons
  const logoPreview = $('logoPreview');
  const cardPreviewArea = $('cardPreviewArea');
  const biosArea = $('biosArea');
  const genBtn = $('generateBtn');
  const resetBtn = $('resetBtn');
  const downloadLogoPng = $('downloadLogoPng');
  const downloadLogoSvg = $('downloadLogoSvg');
  const downloadCardPng = $('downloadCardPng');
  const copyAllBiosBtn = $('copyAllBios');
  const downloadSiteBtn = $('downloadSiteBtn');
  const openInNew = $('openInNew');
  const siteFrame = $('siteFrame');

  let currentSvgString = '';
  let currentSiteHtml = '';

  // --- Logo generator (same as before) ---
  function initialsFrom(name){
    if(!name) return 'W';
    const parts = name.trim().split(/\s+/).filter(Boolean);
    if(parts.length === 1) return parts[0].slice(0,2).toUpperCase();
    return (parts[0][0] + parts[1][0]).toUpperCase();
  }
  function pickIcon(category){
    switch(category){
      case 'tech': return '<g transform="translate(20,18)"><rect x="4" y="8" width="56" height="36" rx="6" /><rect x="16" y="20" width="32" height="16" rx="4" fill="#fff" opacity="0.9"/></g>';
      case 'food': return '<g transform="translate(18,20)"><path d="M10 10c8-8 34-8 42 0 6 6-6 18-21 18S6 16 10 10z"/><circle cx="24" cy="22" r="3" fill="#fff" opacity="0.9"/></g>';
      case 'fashion': return '<g transform="translate(18,18)"><path d="M16 8c6-6 26-6 32 0 6 6-6 22-16 22S12 16 16 8z" /><path d="M24 10v18" stroke="#fff" stroke-width="3" stroke-linecap="round" opacity="0.9"/></g>';
      case 'health': return '<g transform="translate(18,18)"><path d="M28 6c6 0 14 8 14 14s-8 14-14 14S14 28 14 20 22 6 28 6z" /><path d="M28 16v10M21 23h14" stroke="#fff" stroke-width="3" stroke-linecap="round" opacity="0.9"/></g>';
      default: return '<g transform="translate(18,18)"><circle cx="24" cy="24" r="18"/><rect x="10" y="10" width="28" height="28" rx="6" fill="#fff" opacity="0.08"/></g>';
    }
  }
  function buildLogoSvg(name, category, accent){
    const initials = initialsFrom(name);
    const bg = (accent && /^#/.test(accent)) ? accent : '#0f62fe';
    const icon = pickIcon(category);
    const svg = `
      <svg xmlns="http://www.w3.org/2000/svg" width="160" height="160" viewBox="0 0 64 64">
        <defs><filter id="s" x="-20%" y="-20%" width="140%" height="140%"><feDropShadow dx="0" dy="4" stdDeviation="6" flood-opacity="0.12"/></filter></defs>
        <rect x="0" y="0" width="64" height="64" rx="12" fill="${bg}" filter="url(#s)"/>
        ${icon}
        <text x="50%" y="70%" text-anchor="middle" font-family="system-ui,Segoe UI,Roboto,Arial" font-size="18" font-weight="700" fill="rgba(255,255,255,0.98)">${initials}</text>
      </svg>`;
    return svg;
  }
  function setLogoPreview(svgString){
    currentSvgString = svgString;
    logoPreview.innerHTML = '';
    const wrapper = document.createElement('div');
    wrapper.innerHTML = svgString;
    const svgEl = wrapper.querySelector('svg');
    svgEl.style.width = '160px';
    svgEl.style.height = '160px';
    logoPreview.appendChild(svgEl);
  }
  function downloadSvg(name, svgString){
    const blob = new Blob([svgString], {type:'image/svg+xml'});
    const a = document.createElement('a');
    a.href = URL.createObjectURL(blob);
    a.download = (name||'logo') + '.svg';
    document.body.appendChild(a); a.click(); a.remove();
    setTimeout(()=>URL.revokeObjectURL(a.href),3000);
  }
  function svgToPng(svgString, width=800, height=800){
    return new Promise((res, rej) => {
      const img = new Image();
      const svgBlob = new Blob([svgString], {type:'image/svg+xml;charset=utf-8'});
      const url = URL.createObjectURL(svgBlob);
      img.onload = () => {
        const canvas = document.createElement('canvas');
        canvas.width = width; canvas.height = height;
        const ctx = canvas.getContext('2d');
        ctx.fillStyle = 'white'; ctx.fillRect(0,0,canvas.width,canvas.height);
        ctx.drawImage(img,0,0,canvas.width,canvas.height);
        URL.revokeObjectURL(url);
        canvas.toBlob(b => res(b), 'image/png');
      };
      img.onerror = (e) => { URL.revokeObjectURL(url); rej(e); };
      img.src = url;
    });
  }
  async function downloadSvgAsPng(name, svgString){
    try{
      const blob = await svgToPng(svgString, 800,800);
      const a = document.createElement('a');
      a.href = URL.createObjectURL(blob);
      a.download = (name||'logo') + '.png';
      document.body.appendChild(a); a.click(); a.remove();
      setTimeout(()=>URL.revokeObjectURL(a.href),3000);
    }catch(e){ alert('PNG conversion failed'); }
  }

  // card building (same)
  function escapeHtml(s=''){ return String(s).replace(/[&<>"']/g, c=>({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[c])); }
  function buildCardHtml({name, email, phone, address, highlights, logoSvg, accent}){
    const tinyLogo = logoSvg.replace(/(width="[^"]*")/,'width="64"').replace(/(height="[^"]*")/,'height="64"').replace(/<defs>[\s\S]*?<\/defs>/,'');
    const highlightHtml = (highlights||'').split(',').filter(Boolean).slice(0,3).map(h => `<div class="chip">${escapeHtml(h.trim())}</div>`).join(' ');
    const cardHtml = `
      <div class="cardPreview" style="--accent:${accent||'#0f62fe'}">
        <div class="cardTop">
          <div class="cardLogo">${tinyLogo}</div>
          <div>
            <div class="cardName">${escapeHtml(name||'')}</div>
            <div class="cardSmall">${escapeHtml(address||'')}</div>
          </div>
        </div>
        <div style="display:flex;justify-content:space-between;align-items:center">
          <div style="font-size:13px;color:${escapeHtml('#0f1724')}">
            <div>${escapeHtml(email||'')}</div>
            <div style="margin-top:6px">${escapeHtml(phone||'')}</div>
          </div>
          <div style="display:flex;flex-direction:column;gap:6px;align-items:flex-end">${highlightHtml}</div>
        </div>
      </div>
    `;
    return cardHtml;
  }
  function setCardPreview(html){
    cardPreviewArea.innerHTML = '';
    const wrapper = document.createElement('div');
    wrapper.innerHTML = html;
    cardPreviewArea.appendChild(wrapper.firstElementChild);
  }

  // capture element to PNG (for card download)
  async function elementToPngBlob(el, width=960, height=null){
    const serialized = new XMLSerializer().serializeToString(el);
    const bbox = el.getBoundingClientRect();
    const w = width || Math.round(bbox.width);
    const h = height || Math.round(bbox.height);
    const svg = `<svg xmlns="http://www.w3.org/2000/svg" width="${w}" height="${h}">
      <foreignObject width="100%" height="100%">
        <div xmlns="http://www.w3.org/1999/xhtml" style="width:${w}px;height:${h}px">
          ${serialized}
        </div>
      </foreignObject>
    </svg>`;
    return svgToPng(svg, w, h);
  }

  // bios
  function generateBios({name, desc, highlights, address}){
    const h = (highlights||'').split(',').map(s=>s.trim()).filter(Boolean);
    const short = desc || (h[0] ? h[0] : 'Professional services');
    const bios = [];
    bios.push(`${name} — ${short}. Contact: ${emailEl.value || 'DM'} | ${phoneEl.value || ''}`);
    bios.push(`${name}: ${short}. Services: ${(h.length? h.join(' · '): 'Services available')}. ${address? address : ''}`);
    bios.push(`${name} — Built with care. ${short}. Book: ${phoneEl.value || 'via DM'}`);
    return bios;
  }

  // --- Website generator: builds a single index.html string ---
  function buildSiteHtml({name, desc, highlights, email, phone, address, logoSvg, accent}){
    // sanitize accent and set fallback
    accent = (accent && /^#/.test(accent)) ? accent : '#0f62fe';
    const hList = (highlights||'').split(',').map(s=>s.trim()).filter(Boolean);
    const servicesHtml = hList.length ? hList.map(s=>`<li>${escapeHtml(s)}</li>`).join('') : '<li>Services available</li>';
    // inline tiny logo (we remove defs to keep it compact)
    const tinyLogo = logoSvg ? logoSvg.replace(/<defs>[\s\S]*?<\/defs>/,'') : '';
    // build full HTML
    const site = `<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>${escapeHtml(name||'My Website')}</title>
<style>
  :root{--accent:${escapeHtml(accent)};--bg:#ffffff;--muted:#6b7280;--text:#0f1724}
  body{font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial;margin:0;background:var(--bg);color:var(--text);-webkit-font-smoothing:antialiased}
  header{background:linear-gradient(90deg,var(--accent),#6f44ff);color:white;padding:36px 20px;display:flex;align-items:center;gap:18px}
  .logoWrap{width:72px;height:72px;display:flex;align-items:center;justify-content:center;border-radius:14px;background:rgba(255,255,255,0.08)}
  h1{margin:0;font-size:22px}
  p.lead{margin:6px 0 0;opacity:0.95}
  main{padding:28px 20px;max-width:1000px;margin:0 auto}
  .grid{display:grid;grid-template-columns:1fr 320px;gap:24px;align-items:start}
  .card{border-radius:12px;padding:14px;background:#fbfdff;border:1px solid #f0f3f7}
  ul.services{padding-left:18px;margin:0}
  footer{padding:20px;text-align:center;color:var(--muted);font-size:14px}
  .btn{display:inline-block;padding:10px 14px;border-radius:10px;background:var(--accent);color:white;text-decoration:none;font-weight:600}
  @media(max-width:900px){ .grid{grid-template-columns:1fr} header{flex-direction:column;align-items:flex-start} }
</style>
</head>
<body>
  <header>
    <div class="logoWrap">${tinyLogo}</div>
    <div>
      <h1>${escapeHtml(name||'')}</h1>
      <p class="lead">${escapeHtml(desc||'')}</p>
    </div>
  </header>
  <main>
    <div style="max-width:1000px;margin:0 auto">
      <div class="grid">
        <section>
          <article class="card">
            <h2>About</h2>
            <p>${escapeHtml(desc||'We provide professional services.')}</p>
            <p><strong>Contact</strong><br>${escapeHtml(email||'')} ${phone? '<br>'+escapeHtml(phone):''}</p>
            ${address? `<p><strong>Address</strong><br>${escapeHtml(address)}</p>` : ''}
            <p style="margin-top:10px"><a class="btn" href="mailto:${escapeHtml(email||'')}">Contact us</a></p>
          </article>
          <article style="margin-top:18px">
            <h3>Services</h3>
            <ul class="services">${servicesHtml}</ul>
          </article>
        </section>
        <aside>
          <div class="card">
            <h3>Quick info</h3>
            <div style="margin-top:8px"><strong>Email</strong><div style="color:var(--muted)">${escapeHtml(email||'')}</div></div>
            <div style="margin-top:8px"><strong>Phone</strong><div style="color:var(--muted)">${escapeHtml(phone||'')}</div></div>
            ${address? `<div style="margin-top:8px"><strong>Address</strong><div style="color:var(--muted)">${escapeHtml(address)}</div></div>` : ''}
          </div>
        </aside>
      </div>
    </div>
  </main>
  <footer>&copy; ${new Date().getFullYear()} ${escapeHtml(name||'')}</footer>
</body>
</html>`;
    return site;
  }

  // generate flow (main button
