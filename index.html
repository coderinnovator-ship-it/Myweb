<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>WebForge — Logo, Card & Bio Generator</title>
<style>
  :root{
    --accent:#0f62fe;
    --muted:#6b7280;
    --panel:#fff;
    --bg:linear-gradient(180deg,#eef2ff,#f7f9ff);
    --text:#0f1724;
  }
  *{box-sizing:border-box}
  body{font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial;margin:0;background:var(--bg);color:var(--text);padding:20px}
  .wrap{max-width:1100px;margin:0 auto}
  header{display:flex;gap:14px;align-items:center;margin-bottom:18px}
  .logoBrand{background:linear-gradient(135deg,var(--accent),#6f44ff);color:white;padding:10px 14px;border-radius:10px;font-weight:700}
  h1{margin:0;font-size:20px}
  p.lead{margin:6px 0 0;color:var(--muted)}
  .grid{display:grid;grid-template-columns:1fr 420px;gap:18px}
  .card{background:var(--panel);border-radius:12px;padding:16px;box-shadow:0 6px 20px rgba(15,23,36,0.06)}
  label{display:block;font-size:13px;color:var(--muted);margin-bottom:6px}
  input[type="text"], input[type="email"], input[type="tel"], textarea, select{
    width:100%;padding:10px;border:1px solid #e6e9ef;border-radius:10px;font-size:15px;
  }
  textarea{min-height:72px;resize:vertical}
  .row{display:flex;gap:10px}
  .col{flex:1}
  .actions{display:flex;gap:8px;align-items:center;margin-top:12px}
  .btn{background:var(--accent);color:white;padding:10px 14px;border-radius:10px;border:0;cursor:pointer;font-weight:600}
  .btn.ghost{background:#fff;color:var(--text);border:1px solid #ddd}
  .muted{color:var(--muted);font-size:13px}
  .previewBox{display:flex;flex-direction:column;gap:12px}
  .previewArea{background:#fff;border-radius:10px;padding:12px;border:1px solid #eee;min-height:120px;display:flex;align-items:center;justify-content:center}
  .controlsSmall{display:flex;gap:8px;align-items:center}
  .chip{display:inline-flex;gap:8px;align-items:center;padding:6px 8px;border-radius:8px;background:#f2f4f8;border:1px solid #eceff6;font-size:13px;color:var(--muted)}
  footer{margin-top:18px;color:var(--muted);font-size:13px;text-align:center}
  /* logo preview specifics */
  .logoPreview svg{width:160px;height:160px;border-radius:14px;background:transparent}
  /* business card preview */
  .cardPreview{width:320px;height:180px;border-radius:10px;padding:16px;box-shadow:0 8px 30px rgba(15,23,36,0.06);background:linear-gradient(180deg,#fff,#fbfdff);display:flex;flex-direction:column;justify-content:space-between}
  .cardTop{display:flex;gap:12px;align-items:center}
  .cardLogo{width:64px;height:64px;border-radius:8px;overflow:hidden;display:flex;align-items:center;justify-content:center;background:#f3f6fb}
  .cardName{font-weight:700}
  .cardSmall{font-size:13px;color:var(--muted)}
  .bioList{display:flex;flex-direction:column;gap:8px}
  .bioItem{background:#fff;border-radius:8px;padding:10px;border:1px solid #f0f3f7}
  @media(max-width:980px){ .grid{grid-template-columns:1fr} .cardPreview{width:100%;max-width:420px} }

  /* subtle helper for small buttons */
  .small{padding:8px 10px;font-size:14px}
  .topDownload{margin-left:auto;display:flex;gap:8px;align-items:center}
</style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="logoBrand">WebForge</div>
      <div style="flex:1">
        <h1>WebForge — Logo, Card & Social Bio</h1>
        <p class="lead">Generate a logo, printable business card, and social media bios in one click.</p>
      </div>
      <div class="topDownload muted">
        <!-- quick export buttons (logo/card) -->
        <button id="downloadAllLogos" class="btn ghost small" title="Download logo PNG">Logo PNG</button>
        <button id="downloadAllCards" class="btn ghost small" title="Download card PNG">Card PNG</button>
      </div>
    </header>

    <div class="grid">
      <!-- LEFT: Inputs -->
      <div class="card">
        <label>Business / Personal Name</label>
        <input id="businessName" placeholder="Example: Connect Studio">

        <div style="height:10px"></div>
        <label>Email (visible on card)</label>
        <input id="email" type="email" placeholder="name@example.com">

        <div style="height:10px"></div>
        <label>Phone (visible on card)</label>
        <input id="phone" type="tel" placeholder="+1 555 555 5555">

        <div style="height:10px"></div>
        <label>One-line description (used in hero / bios)</label>
        <input id="desc" placeholder="Example: Fast, affordable website generator">

        <div style="height:10px"></div>
        <label>Address (optional)</label>
        <input id="address" placeholder="City, State, Country">

        <div style="height:10px"></div>
        <label>Highlight services / tagline (comma separated)</label>
        <input id="highlights" placeholder="Websites, Logo, Business card">

        <div style="height:10px"></div>
        <label>Logo icon category</label>
        <select id="iconCategory">
          <option value="general">General</option>
          <option value="tech">Tech</option>
          <option value="food">Food</option>
          <option value="fashion">Fashion</option>
          <option value="health">Health</option>
        </select>

        <div style="height:10px"></div>
        <label>Preferred accent color (hex)</label>
        <input id="accent" placeholder="#0f62fe" value="#0f62fe">

        <div style="height:12px"></div>
        <div class="actions">
          <button id="generateBtn" class="btn">Generate</button>
          <button id="resetBtn" class="btn ghost">Reset</button>
          <div class="muted" style="margin-left:auto">Mei — everything here runs locally</div>
        </div>
        <div style="height:10px"></div>
        <div class="muted">Tip: fill name + icon category + accent then press Generate.</div>
      </div>

      <!-- RIGHT: Previews -->
      <div style="display:flex;flex-direction:column;gap:12px">
        <div class="card">
          <div style="display:flex;justify-content:space-between;align-items:center">
            <strong>Logo</strong>
            <div class="controlsSmall">
              <button id="downloadLogoPng" class="btn ghost small">Download PNG</button>
              <button id="downloadLogoSvg" class="btn ghost small">Download SVG</button>
            </div>
          </div>
          <div style="height:10px"></div>
          <div class="previewArea logoPreview" id="logoPreview">
            <div class="muted">No logo yet — click Generate.</div>
          </div>
        </div>

        <div class="card">
          <div style="display:flex;justify-content:space-between;align-items:center">
            <strong>Business Card</strong>
            <div class="controlsSmall">
              <button id="downloadCardPng" class="btn ghost small">Download PNG</button>
              <button id="downloadCardSvg" class="btn ghost small">Download SVG</button>
            </div>
          </div>
          <div style="height:10px"></div>
          <div class="previewArea" id="cardPreviewArea">
            <div class="muted">No card yet — click Generate.</div>
          </div>
        </div>

        <div class="card">
          <div style="display:flex;justify-content:space-between;align-items:center">
            <strong>Social Media Bios</strong>
            <div class="controlsSmall">
              <button id="copyAllBios" class="btn ghost small">Copy All</button>
            </div>
          </div>
          <div style="height:10px"></div>
          <div class="previewArea" style="flex-direction:column;align-items:stretch" id="biosArea">
            <div class="muted">No bios yet — click Generate.</div>
          </div>
        </div>

      </div>
    </div>

    <footer>&copy; <span id="year"></span> WebForge — Mei</footer>
  </div>

<script>
  // helper $
  const $ = id => document.getElementById(id);
  $('year').textContent = new Date().getFullYear();

  // inputs
  const nameEl = $('businessName');
  const emailEl = $('email');
  const phoneEl = $('phone');
  const descEl = $('desc');
  const addressEl = $('address');
  const highlightsEl = $('highlights');
  const categoryEl = $('iconCategory');
  const accentEl = $('accent');

  // preview targets & buttons
  const logoPreview = $('logoPreview');
  const cardPreviewArea = $('cardPreviewArea');
  const biosArea = $('biosArea');
  const genBtn = $('generateBtn');
  const resetBtn = $('resetBtn');
  const downloadLogoPng = $('downloadLogoPng');
  const downloadLogoSvg = $('downloadLogoSvg');
  const downloadCardPng = $('downloadCardPng');
  const downloadCardSvg = $('downloadCardSvg');
  const copyAllBiosBtn = $('copyAllBios');
  const downloadAllLogos = $('downloadAllLogos');
  const downloadAllCards = $('downloadAllCards');

  // state
  let currentSvgString = '';
  let currentCardSvgString = '';
  let lastNameSlug = 'webforge-user';

  // --- Logo generator (SVG) ---
  function initialsFrom(name){
    if(!name) return 'W';
    const parts = name.trim().split(/\s+/).filter(Boolean);
    if(parts.length === 1) return parts[0].slice(0,2).toUpperCase();
    return (parts[0][0] + parts[1][0]).toUpperCase();
  }

  function pickIcon(category){
    switch(category){
      case 'tech': return '<g transform="translate(20,18)"><rect x="4" y="8" width="56" height="36" rx="6" /><rect x="16" y="20" width="32" height="16" rx="4" fill="#fff" opacity="0.9"/></g>';
      case 'food': return '<g transform="translate(18,20)"><path d="M10 10c8-8 34-8 42 0 6 6-6 18-21 18S6 16 10 10z"/><circle cx="24" cy="22" r="3" fill="#fff" opacity="0.9"/></g>';
      case 'fashion': return '<g transform="translate(18,18)"><path d="M16 8c6-6 26-6 32 0 6 6-6 22-16 22S12 16 16 8z" /><path d="M24 10v18" stroke="#fff" stroke-width="3" stroke-linecap="round" opacity="0.9"/></g>';
      case 'health': return '<g transform="translate(18,18)"><path d="M28 6c6 0 14 8 14 14s-8 14-14 14S14 28 14 20 22 6 28 6z" /><path d="M28 16v10M21 23h14" stroke="#fff" stroke-width="3" stroke-linecap="round" opacity="0.9"/></g>';
      default: return '<g transform="translate(18,18)"><circle cx="24" cy="24" r="18"/><rect x="10" y="10" width="28" height="28" rx="6" fill="#fff" opacity="0.08"/></g>';
    }
  }

  function buildLogoSvg(name, category, accent){
    const initials = initialsFrom(name);
    const bg = (accent && /^#/.test(accent)) ? accent : '#0f62fe';
    const icon = pickIcon(category);
    const svg = `<svg xmlns="http://www.w3.org/2000/svg" width="160" height="160" viewBox="0 0 64 64">
      <defs><filter id="s" x="-20%" y="-20%" width="140%" height="140%"><feDropShadow dx="0" dy="4" stdDeviation="6" flood-opacity="0.12"/></filter></defs>
      <rect x="0" y="0" width="64" height="64" rx="12" fill="${bg}" filter="url(#s)"/>
      ${icon}
      <text x="50%" y="70%" text-anchor="middle" font-family="system-ui,Segoe UI,Roboto,Arial" font-size="18" font-weight="700" fill="rgba(255,255,255,0.98)">${initials}</text>
    </svg>`;
    return svg;
  }

  function setLogoPreview(svgString){
    currentSvgString = svgString;
    const wrapper = document.createElement('div');
    wrapper.innerHTML = svgString;
    const svgEl = wrapper.querySelector('svg');
    svgEl.style.width = '160px';
    svgEl.style.height = '160px';
    logoPreview.innerHTML = '';
    logoPreview.appendChild(svgEl);
  }

  // download helpers
  function downloadBlob(filename, blob){
    const a = document.createElement('a');
    a.href = URL.createObjectURL(blob);
    a.download = filename;
    document.body.appendChild(a);
    a.click();
    a.remove();
    setTimeout(()=>URL.revokeObjectURL(a.href),3000);
  }

  function downloadSvgFile(name, svgString){
    const blob = new Blob([svgString], {type:'image/svg+xml'});
    downloadBlob((name||'asset') + '.svg', blob);
  }

  function svgToPng(svgString, width=800, height=800){
    return new Promise((res, rej) => {
      const img = new Image();
      // ensure proper encoding
      const svgBlob = new Blob([svgString], {type:'image/svg+xml;charset=utf-8'});
      const url = URL.createObjectURL(svgBlob);
      img.onload = () => {
        try{
          const canvas = document.createElement('canvas');
          canvas.width = width;
          canvas.height = height;
          const ctx = canvas.getContext('2d');
          // white background
          ctx.fillStyle = 'white';
          ctx.fillRect(0,0,canvas.width,canvas.height);
          ctx.drawImage(img,0,0,canvas.width,canvas.height);
          URL.revokeObjectURL(url);
          canvas.toBlob(b => res(b), 'image/png');
        }catch(e){ URL.revokeObjectURL(url); rej(e); }
      };
      img.onerror = (e) => { URL.revokeObjectURL(url); rej(e); };
      img.src = url;
    });
  }

  async function downloadSvgAsPng(name, svgString, size=1000){
    try{
      const blob = await svgToPng(svgString, size, Math.round(size * 0.56)); // card aspect ratio ~16:9-ish
      downloadBlob((name||'asset') + '.png', blob);
    }catch(e){
      alert('PNG conversion failed');
      console.error(e);
    }
  }

  // --- Business card: build both HTML preview and an SVG for reliable export ---
  function escapeHtml(s=''){ return String(s).replace(/[&<>"']/g, c=>({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[c])); }

  function buildCardHtml({name, email, phone, address, highlights, logoSvg, accent}){
    // small inline logo for preview
    const tinyLogo = logoSvg ? logoSvg.replace(/(width="[^"]*")/,'width="64"').replace(/(height="[^"]*")/,'height="64"').replace(/<defs>[\s\S]*?<\/defs>/,'') : '';
    const highlightHtml = (highlights||'').split(',').filter(Boolean).slice(0,3).map(h => `<div class="chip">${escapeHtml(h.trim())}</div>`).join(' ');
    const cardHtml = `
      <div class="cardPreview" style="--accent:${accent||'#0f62fe'}">
        <div class="cardTop">
          <div class="cardLogo">${tinyLogo}</div>
          <div>
            <div class="cardName">${escapeHtml(name||'')}</div>
            <div class="cardSmall">${escapeHtml(address||'')}</div>
          </div>
        </div>
        <div style="display:flex;justify-content:space-between;align-items:center">
          <div style="font-size:13px;color:${escapeHtml('#0f1724')}">
            <div>${escapeHtml(email||'')}</div>
            <div style="margin-top:6px">${escapeHtml(phone||'')}</div>
          </div>
          <div style="display:flex;flex-direction:column;gap:6px;align-items:flex-end">${highlightHtml}</div>
        </div>
      </div>
    `;
    return cardHtml;
  }

  // Build an SVG string for the business card. This is used for PNG export (reliable).
  function buildCardSvgString({name, email, phone, address, highlights, logoSvg, accent}){
    // remove defs and set appropriate sizes
    const tinyLogo = logoSvg ? logoSvg.replace(/<defs>[\s\S]*?<\/defs>/,'').replace(/width="[^"]*"/,'width="84"').replace(/height="[^"]*"/,'height="84"') : '';
    const accentSafe = (accent && /^#/.test(accent)) ? accent : '#0f62fe';
    const hList = (highlights||'').split(',').map(s=>s.trim()).filter(Boolean).slice(0,3);
    const highlightsSvg = hList.map((h, i) => `<rect x="${260 - i*90}" y="120" rx="8" ry="8" width="84" height="24" fill="#f2f4f8"/><text x="${260 - i*90 + 42}" y="138" font-size="11" font-family="system-ui,Roboto,Arial" fill="${'#6b7280'}" text-anchor="middle">${escapeHtml(h)}</text>`).join('');
    // card size: 1000 x 600 (for good export)
    const svg = `<?xml version="1.0" encoding="utf-8"?>
<svg xmlns="http://www.w3.org/2000/svg" width="1000" height="600" viewBox="0 0 1000 600" xmlns:xlink="http://www.w3.org/1999/xlink">
  <rect rx="28" width="1000" height="600" fill="#ffffff" stroke="#e8eefb" />
  <rect x="0" y="0" width="1000" height="220" rx="28" fill="${accentSafe}" />
  <g transform="translate(40,40)">
    <g transform="translate(0,0)">
      ${tinyLogo}
    </g>
  </g>
  <g transform="translate(160,80)" font-family="system-ui,Roboto,Arial">
    <text x="0" y="24" font-size="36" font-weight="700" fill="#0f1724">${escapeHtml(name||'')}</text>
    <text x="0" y="64" font-size="18" fill="#6b7280">${escapeHtml(address||'')}</text>
  </g>
  <g transform="translate(160,160)" font-family="system-ui,Roboto,Arial" fill="#0f1724" font-size="16">
    <text x="0" y="28">${escapeHtml(email||'')}</text>
    <text x="0" y="64">${escapeHtml(phone||'')}</text>
  </g>
  ${highlightsSvg}
</svg>`;
    return svg;
  }

  function setCardPreview(html){
    cardPreviewArea.innerHTML = '';
    const wrapper = document.createElement('div');
    wrapper.innerHTML = html;
    cardPreviewArea.appendChild(wrapper.firstElementChild);
  }

  // --- bios ---
  function generateBios({name, desc, highlights, address}){
    const h = (highlights||'').split(',').map(s=>s.trim()).filter(Boolean);
    const short = desc || (h[0] ? h[0] : 'Professional services');
    const bios = [];
    bios.push(`${name} — ${short}. Contact: ${emailEl.value || 'DM'} | ${phoneEl.value || ''}`);
    bios.push(`${name}: ${short}. Services: ${(h.length? h.join(' · '): 'Services available')}. ${address? address : ''}`);
    bios.push(`${name} — Built with care. ${short}. Book: ${phoneEl.value || 'via DM'}`);
    return bios;
  }

  // --- Generate flow ---
  genBtn.addEventListener('click', async ()=>{
    const name = nameEl.value.trim()||'WebForge User';
    const email = emailEl.value.trim()||'';
    const phone = phoneEl.value.trim()||'';
    const desc = descEl.value.trim()||'';
    const address = addressEl.value.trim()||'';
    const highlights = highlightsEl.value.trim()||'';
    const category = categoryEl.value || 'general';
    let accent = (accentEl.value||'#0f62fe').trim();
    if(accent && !/^#/.test(accent)) accent = '#'+accent;
    lastNameSlug = name.replace(/\s+/g,'-').toLowerCase().replace(/[^a-z0-9\-]/g,'');

    // logo
    const svg = buildLogoSvg(name, category, accent);
    setLogoPreview(svg);
    // enable logo buttons
    downloadLogoSvg.onclick = ()=> downloadSvgFile((lastNameSlug || 'logo'), svg);
    downloadLogoPng.onclick = ()=> downloadSvgAsPng((lastNameSlug || 'logo'), svg, 800);

    // card preview html
    const cardHtml = buildCardHtml({name, email, phone, address, highlights, logoSvg: svg, accent});
    setCardPreview(cardHtml);

    // prebuild card svg string for reliable export
    currentCardSvgString = buildCardSvgString({name, email, phone, address, highlights, logoSvg: svg, accent});

    // wire card downloads
    downloadCardSvg.onclick = ()=> {
      if(!currentCardSvgString){ alert('Generate first'); return; }
      downloadSvgFile((lastNameSlug || 'business-card'), currentCardSvgString);
    };
    downloadCardPng.onclick = async ()=> {
      if(!currentCardSvgString){ alert('Generate first'); return; }
      await downloadSvgAsPng((lastNameSlug || 'business-card'), currentCardSvgString, 1400);
    };

    // bios
    const bios = generateBios({name, desc, highlights, address});
    biosArea.innerHTML = '';
    const list = document.createElement('div');
    list.className = 'bioList';
    bios.forEach((b)=>{
      const it = document.createElement('div'); it.className='bioItem';
      const pre = document.createElement('div'); pre.textContent = b;
      const controls = document.createElement('div'); controls.style.marginTop='8px'; controls.style.display='flex'; controls.style.gap='8px';
      const copyBtn = document.createElement('button'); copyBtn.className='btn ghost small'; copyBtn.textContent='Copy';
      copyBtn.onclick = async ()=> {
        try{ await navigator.clipboard.writeText(b); copyBtn.textContent='Copied!'; setTimeout(()=>copyBtn.textContent='Copy',1200); } catch(e){ alert('Copy failed'); }
      };
      controls.appendChild(copyBtn);
      it.appendChild(pre); it.appendChild(controls);
      list.appendChild(it);
    });
    biosArea.appendChild(list);

    // copy all
    copyAllBiosBtn.onclick = async ()=>{
      try{
        await navigator.clipboard.writeText(bios.join('\n\n'));
 
